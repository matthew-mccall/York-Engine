<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>York Engine: York-Engine</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">York Engine<span id="projectnumber">&#160;0.1.0</span>
   </div>
   <div id="projectbrief">A platform for developing realtime interactive 3D media.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">York-Engine </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_README"></a><a href="https://mxtt-mmxix.github.io/York-Engine">https://mxtt-mmxix.github.io/York-Engine</a></p>
<p ><img src="https://github.com/mxtt-mmxix/York-Engine/actions/workflows/cmake.yml/badge.svg" alt="workflow" style="pointer-events: none;" class="inline"/></p>
<p >A platform for developing realtime interactive 3D media.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Building</h1>
<h2><a class="anchor" id="autotoc_md2"></a>
Dependencies</h2>
<h3><a class="anchor" id="autotoc_md3"></a>
LunarG Vulkan SDK</h3>
<p ><a href="https://vulkan.lunarg.com/sdk/home">https://vulkan.lunarg.com/sdk/home</a></p>
<p >You may <em>optionally</em> install the tools included in the SDK instead of the SDK itself. See the LunarG documentation for more information. At bare minimum, York-Engine needs the <a href="https://github.com/khronosgroup/vulkan-hpp">C++ Vulkan Headers</a>, <a href="https://github.com/KhronosGroup/Vulkan-Loader">Vulkan Loader</a>, and any other development packages provided if you were to opt out of installing the SDK. </p>
<h3><a class="anchor" id="autotoc_md4"></a>
SDL2</h3>
<p ><a href="https://libsdl.org/">https://libsdl.org/</a></p>
<p >Version 2.0.18 or newer. If CMake could not automatically find and link to a suitable local copy, it will build SDL2 from source. You can specify <code>SDL_LIBRARY</code> and <code>SDL_INCLUDE_DIR</code> to assist CMake in finding SDL2. </p>
<h3><a class="anchor" id="autotoc_md5"></a>
Apache Xerces-C++</h3>
<p ><a href="https://xerces.apache.org/xerces-c/">https://xerces.apache.org/xerces-c/</a></p>
<p >Version 3.2.3 or newer. If CMake could not automatically find and link to a suitable local copy, it will build Xerces-C++ from source. </p>
<h3><a class="anchor" id="autotoc_md6"></a>
libcurl</h3>
<p ><a href="https://curl.se/libcurl/">https://curl.se/libcurl/</a></p>
<p >Used to perform network requests. </p>
<h3><a class="anchor" id="autotoc_md7"></a>
In-Tree Dependencies</h3>
<p >York-Engine includes source copies third-party dependencies in the <code>/libs/</code> folder. This makes dependency management simple as we can just simply build what we need from source without worrying about how and where to search for local installations. Libraries that are shipped with York-Engine include <a href="https://fmt.dev/latest/index.html">{fmt}</a>, <a href="https://www.curlpp.org/">curlpp</a>, <a href="https://github.com/google/shaderc">shaderc</a>, and <a href="https://taskflow.github.io/">taskflow</a>. Please note that any redistributions of York-Engine must not only respect our <a href="https://github.com/mxtt-mmxix/York-Engine/blob/main/LICENSE">license</a>, but our dependencies' licenses as well.</p>
<h2><a class="anchor" id="autotoc_md8"></a>
CMake</h2>
<p >To build the York-Engine Library and Runtime:</p><ul>
<li>Run the setup script: <code>./utils/Setup.sh</code>.</li>
<li>Use <a href="https://cmake.org/">CMake</a> to generate the build files for the project: <code>cmake -B build .</code>.</li>
<li>Then, build the project: <code>cmake --build build</code>.</li>
<li>To build the sample: <code>cmake --build build -- SampleLayer</code>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md9"></a>
Using</h1>
<h2><a class="anchor" id="autotoc_md10"></a>
Sample</h2>
<p >A sample application is located in the <a href="https://github.com/mxtt-mmxix/York-Engine/tree/main/sample"><code>/sample/</code></a> folder. See that folder for a reference on how to develop a York-Engine client application.</p>
<h2><a class="anchor" id="autotoc_md11"></a>
How it works</h2>
<div class="fragment"><div class="line">York-Engine     york::Layer ◀─ York-Engine</div>
<div class="line">     │               │                     </div>
<div class="line">     │               └─▶ class yourLayer ┐</div>
<div class="line">     ▼                                   │</div>
<div class="line">  Runtime ◀─ createLayer() ◀── Client ◀──┘</div>
</div><!-- fragment --><p> The York-Engine is a library that provides an API to make developing real-time, interactive programs easier. However, instead of requiring the client to build an executable linked to York-Engine, York-Engine provides its own Runtime. Thus, all the client needs to do is to inherit the <code><a class="el" href="classyork_1_1_layer.html">york::Layer</a></code> class, and define a function which returns a <code><a class="el" href="classyork_1_1_layer.html">york::Layer</a>*</code>. This must be compiled a shared object and will be loaded by the Runtime. The Runtime will search for your function and create your Layer and manages platform initialization for you. A layer source file might look like the following: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_york_8hpp.html">york/York.hpp</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>SampleLayer : <span class="keyword">public</span> <a class="code hl_class" href="classyork_1_1_layer.html">york::Layer</a> {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    SampleLayer(<a class="code hl_class" href="classyork_1_1_registry.html">york::Registry</a> registry) : <a class="code hl_namespace" href="namespaceyork.html">york</a>::Layer(registry) {}</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classyork_1_1_layer.html#a2b657b79db3e4de404cb5cc905a4d8bb">onAttach</a>()<span class="keyword"> override </span>{}</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classyork_1_1_event_handler.html#ad88fe6227fbae2970b83c60e74c60d0d">onEvent</a>(<a class="code hl_struct" href="structyork_1_1_event.html">york::Event</a>&amp; e)<span class="keyword"> override </span>{}</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classyork_1_1_layer.html#ae0a1e174f2dcc69097e3f7a721f513d7">onUpdate</a>(<span class="keywordtype">float</span> deltaTime)<span class="keyword"> override </span>{}</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classyork_1_1_layer.html#a71754d104f7966d5e729d516dbebc84d">onRender</a>()<span class="keyword"> override </span>{}</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classyork_1_1_layer.html#adeeb05288805f99d152b0b37580393a3">onDetach</a>()<span class="keyword"> override </span>{}</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <a class="code hl_class" href="classyork_1_1_layer.html">york::Layer</a>* createLayer(<a class="code hl_class" href="classyork_1_1_registry.html">york::Registry</a>&amp; registry)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">new</span> SampleLayer(registry);</div>
<div class="line">}</div>
<div class="ttc" id="a_york_8hpp_html"><div class="ttname"><a href="_york_8hpp.html">York.hpp</a></div></div>
<div class="ttc" id="aclassyork_1_1_event_handler_html_ad88fe6227fbae2970b83c60e74c60d0d"><div class="ttname"><a href="classyork_1_1_event_handler.html#ad88fe6227fbae2970b83c60e74c60d0d">york::EventHandler::onEvent</a></div><div class="ttdeci">virtual void onEvent(Event &amp;e)=0</div></div>
<div class="ttc" id="aclassyork_1_1_layer_html"><div class="ttname"><a href="classyork_1_1_layer.html">york::Layer</a></div><div class="ttdef"><b>Definition:</b> Layer.hpp:13</div></div>
<div class="ttc" id="aclassyork_1_1_layer_html_a2b657b79db3e4de404cb5cc905a4d8bb"><div class="ttname"><a href="classyork_1_1_layer.html#a2b657b79db3e4de404cb5cc905a4d8bb">york::Layer::onAttach</a></div><div class="ttdeci">virtual void onAttach()</div><div class="ttdoc">A function that will be called when the layer is attached to the stack.</div><div class="ttdef"><b>Definition:</b> Layer.hpp:20</div></div>
<div class="ttc" id="aclassyork_1_1_layer_html_a71754d104f7966d5e729d516dbebc84d"><div class="ttname"><a href="classyork_1_1_layer.html#a71754d104f7966d5e729d516dbebc84d">york::Layer::onRender</a></div><div class="ttdeci">virtual void onRender()</div><div class="ttdoc">A function that will be called on every frame.</div><div class="ttdef"><b>Definition:</b> Layer.hpp:32</div></div>
<div class="ttc" id="aclassyork_1_1_layer_html_adeeb05288805f99d152b0b37580393a3"><div class="ttname"><a href="classyork_1_1_layer.html#adeeb05288805f99d152b0b37580393a3">york::Layer::onDetach</a></div><div class="ttdeci">virtual void onDetach()</div><div class="ttdoc">A function that will be called when the layer is detached from the stack.</div><div class="ttdef"><b>Definition:</b> Layer.hpp:37</div></div>
<div class="ttc" id="aclassyork_1_1_layer_html_ae0a1e174f2dcc69097e3f7a721f513d7"><div class="ttname"><a href="classyork_1_1_layer.html#ae0a1e174f2dcc69097e3f7a721f513d7">york::Layer::onUpdate</a></div><div class="ttdeci">virtual void onUpdate(float deltaTime)</div><div class="ttdoc">A function that will be called on every tick.</div><div class="ttdef"><b>Definition:</b> Layer.hpp:27</div></div>
<div class="ttc" id="aclassyork_1_1_registry_html"><div class="ttname"><a href="classyork_1_1_registry.html">york::Registry</a></div><div class="ttdoc">A singleton class for sharing data between multiple instances of York-Engine.</div><div class="ttdef"><b>Definition:</b> Registry.hpp:20</div></div>
<div class="ttc" id="anamespaceyork_html"><div class="ttname"><a href="namespaceyork.html">york</a></div><div class="ttdef"><b>Definition:</b> Asset.hpp:7</div></div>
<div class="ttc" id="astructyork_1_1_event_html"><div class="ttname"><a href="structyork_1_1_event.html">york::Event</a></div><div class="ttdoc">Represents Event data.</div><div class="ttdef"><b>Definition:</b> Event.hpp:18</div></div>
</div><!-- fragment --><p> It is important to note that your create function must not be name-mangled as to make it easier for the Runtime to search and call the function, hence the <code>extern "C"</code>. Otherwise, this how client applications will be structured: A series of classes that implement <code><a class="el" href="classyork_1_1_layer.html">york::Layer</a></code>, each defining a create function and compiled into a separate standalone shared object. The name of the shared object, excluding any platform prefixes such as "lib" and file extension will be the name of the layer. For example, <code>libSampleLayer.so</code> will be treated as a layer with the name <code>SampleLayer</code>. </p>
<h3><a class="anchor" id="autotoc_md12"></a>
createFunction</h3>
<p >Also note that the Runtime will pass a <code>Registry</code> to the create function. This is because the Runtime is also linked to the Engine. On most modern operating systems, this results in the Engine library being loaded twice, with the Runtime and your Client have their own copies loaded. As a result these two copies of the Engine have their own memory allocated. Thus, internal data structures created in one copy will not be available in the other copy. As such, the <code>Registry</code> will contain the necessary data initialized by the Runtime for use in your client. You need to accept this <code>Registry</code> and pass it to the base constructor of the <code>Layer</code>. <br  />
</p>
<h3><a class="anchor" id="autotoc_md13"></a>
Client.xml</h3>
<p >The Runtime will search for and load layers from the current working directory only. However, the Runtime needs to know which layers its looking for. Thus, the Runtime expects each application to have a <code>Client.xml</code> manifest. This manifest contains the name of the client, the name of the layers, and the name of the create function. A <code>Client.xml</code> file might look like the following: </p><div class="fragment"><div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div>
<div class="line">&lt;<span class="keywordtype">Client</span> <span class="keyword">xmlns</span>=<span class="stringliteral">&quot;https://mxtt-mmxix.github.io/York-Engine/&quot;</span></div>
<div class="line">        <span class="keyword">xmlns:xsi</span>=<span class="stringliteral">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></div>
<div class="line">        <span class="keyword">xsi:schemaLocation</span>=<span class="stringliteral">&quot;https://mxtt-mmxix.github.io/York-Engine/ https://raw.githubusercontent.com/mxtt-mmxix/York-Engine/runtime-impl/Client.xsd&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">Name</span>&gt;<span class="keyword">SampleClient</span>&lt;/<span class="keywordtype">Name</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">Layers</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">Layer</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">Name</span>&gt;<span class="keyword">SampleLayer</span>&lt;/<span class="keywordtype">Name</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">CreateFunction</span>&gt;<span class="keyword">createLayer</span>&lt;/<span class="keywordtype">CreateFunction</span>&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">Layer</span>&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">Layers</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">Client</span>&gt;</div>
</div><!-- fragment --><p> Note that the <code>&lt;Name /&gt;</code> of the layer is platform independent, the Runtime will automatically add any prefixes and file extension to the name to find the layer. Also note that the XML above makes use of a Schema. You are encouraged to produce well-formed and valid XML for describing your application.</p>
<p >A collection of a <code>Client.xml</code> file, Layer shared object files, and assets are considered to be a York-Engine client application. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
